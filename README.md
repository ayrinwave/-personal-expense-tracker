# Personal Expense Tracking System API

![Go Version](https://img.shields.io/badge/Go-1.21%2B-blue.svg)
![License](https://img.shields.io/badge/License-MIT-green.svg)

Это RESTful API, созданный на Go, для управления личными расходами. Он позволяет пользователям регистрироваться, входить в систему и выполнять CRUD-операции (создание, чтение, обновление, удаление) со своими расходами.

## Основной функционал

- **Аутентификация пользователей:** Регистрация и вход с использованием JWT (JSON Web Tokens).
- **Безопасное хранение паролей:** Пароли хешируются с использованием алгоритма `bcrypt`.
- **Полный CRUD для расходов:** Авторизованные пользователи могут создавать, просматривать, обновлять и удалять свои записи о расходах.
- **Защита маршрутов:** API-маршруты для работы с расходами защищены с помощью JWT Middleware.

## Технический стек

- **Язык:** Go
- **База данных:** PostgreSQL
- **Контейнеризация:** Docker & Docker Compose
- **Роутинг:** `go-chi/chi`
- **Работа с БД:** `jackc/pgx`
- **Аутентификация:** `golang-jwt/jwt`
- **Конфигурация:** `joho/godotenv` для управления переменными окружения

## Установка и запуск

Для запуска проекта в режиме разработки выполните следующие шаги:

**1. Клонируйте репозиторий**
```sh
git clone https://github.com/ayrinwave/-personal-expense-tracker
cd personal-expense-tracker
```

**2. Создайте файл конфигурации `.env`**

Создайте в корне проекта файл с именем `.env` и скопируйте в него следующее содержимое. Этот файл содержит настройки для локального запуска.

```env
# Порт, на котором будет работать приложение
PORT=8080

# Строка подключения к базе данных в Docker (для локальной разработки)
DB_URL=postgres://postgres:1234@localhost:5433/expenses?sslmode=disable

# Секретный ключ для подписи JWT-токенов
JWT_SECRET=supersecret
```

**3. Запустите базу данных в Docker**

Эта команда запустит контейнер с PostgreSQL в фоновом режиме. Нам нужен только сервис `db`.

```sh
docker-compose up -d db
```

**4. Установите зависимости Go**

Эта команда скачает все необходимые библиотеки, указанные в `go.mod`.

```sh
go mod tidy
```

**5. Запустите приложение**

```sh
go run main.go
```

Сервер будет запущен по адресу `http://localhost:8080`.

## Документация по API

Все защищенные маршруты требуют передачи токена в заголовке `Authorization: Bearer <ВАШ_ТОКЕН>`.

| Метод  | Endpoint                  | Описание                                  |
|--------|---------------------------|-------------------------------------------|
| `POST` | `/user/register`          | Регистрация нового пользователя.          |
| `POST` | `/user/login`             | Вход пользователя и получение JWT-токена. |
| `GET`  | `/api/me`                 | Получение ID текущего пользователя.       |
| `POST` | `/api/expenses`           | Создание нового расхода.                  |
| `GET`  | `/api/expenses`           | Получение списка всех своих расходов.     |
| `PUT`  | `/api/expenses/{id}`      | Обновление существующего расхода.         |
| `DELETE`| `/api/expenses/{id}`      | Удаление расхода.                         |

### Примеры запросов

**Создание расхода (для cmd.exe):**
```sh
curl -X POST http://localhost:8080/api/expenses -H "Authorization: Bearer <ВАШ_ТОКЕН>" -H "Content-Type: application/json" -d "{\"category_id\": 1, \"amount\": 9.99, \"note\": \"Кофе\"}"
```

**Получение списка расходов:**
```sh
curl http://localhost:8080/api/expenses -H "Authorization: Bearer <ВАШ_ТОКЕН>"
```
